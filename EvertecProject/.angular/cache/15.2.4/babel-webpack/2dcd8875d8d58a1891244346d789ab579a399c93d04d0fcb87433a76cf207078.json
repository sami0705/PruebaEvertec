{"ast":null,"code":"import { FormGroup, FormControl } from '@angular/forms';\nimport { DatePipe } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../servicios/api-evertec.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../Common/header/header.component\";\nimport * as i5 from \"../../Common/footer/footer.component\";\nexport class EditComponent {\n  constructor(activerouter, router, api) {\n    this.activerouter = activerouter;\n    this.router = router;\n    this.api = api;\n    this.editForm = new FormGroup({\n      idPerson: new FormControl(0),\n      name: new FormControl(''),\n      lastName: new FormControl(''),\n      birthdate: new FormControl(''),\n      photo: new FormControl(''),\n      idMaritalStatus: new FormControl(1),\n      haveBrothers: new FormControl(false)\n    });\n  }\n  ngOnInit() {\n    let userId = Number(this.activerouter.snapshot.paramMap.get('id'));\n    this.getUser(userId);\n    this.showForm();\n  }\n  getUserData(userId) {\n    return this.api.getUser(userId);\n  }\n  /** Consulta un usuario */\n  getUser(userId) {\n    this.getUserData(userId).subscribe(data => {\n      this.inforUser = data;\n      //this.showForm();\n    });\n    /*this.api.getUser(userId).subscribe(data =>{\r\n      this.inforUser= data;\r\n      const datePipe = new DatePipe('en-CO');\r\n      \r\n      this.editForm.setValue({\r\n        'idPerson': this.inforUser.idPerson,\r\n        'name': this.inforUser.name,\r\n        'lastName': this.inforUser.lastName,\r\n        'birthdate': datePipe.transform(this.inforUser.birthdate, 'dd/MM/yyyy'),\r\n        'photo':    this.inforUser.photo,\r\n        'idMaritalStatus':this.inforUser.idMaritalStatus,\r\n        'haveBrothers': this.inforUser.haveBrothers\r\n      })\r\n    })*/\n  }\n  /**Muestra el usuario en los campos del formulario */\n  showForm() {\n    const datePipe = new DatePipe('en-CO');\n    this.editForm.setValue({\n      'idPerson': this.inforUser.idPerson,\n      'name': this.inforUser.name,\n      'lastName': this.inforUser.lastName,\n      'birthdate': datePipe.transform(this.inforUser.birthdate, 'dd/MM/yyyy'),\n      'photo': this.inforUser.photo,\n      'idMaritalStatus': this.inforUser.idMaritalStatus,\n      'haveBrothers': this.inforUser.haveBrothers\n    });\n  }\n  /** Permite editar un usuario */\n  updateUser(form) {\n    //form.name = form.name ?? ''; // Proporciona una cadena vacía si name es null\n    let userId = Number(this.activerouter.snapshot.paramMap.get('id'));\n    const data = {\n      idPerson: form.idPerson || 0,\n      name: form.name || '',\n      lastName: form.lastName || '',\n      birthdate: form.birthdate || new Date(),\n      photo: form.photo || null,\n      idMaritalStatus: form.idMaritalStatus || 0,\n      haveBrothers: form.haveBrothers || false\n    };\n    //Consume método put del API \n    this.api.putUser(form, userId).subscribe(data => {\n      console.log(data);\n    });\n  }\n}\nEditComponent.ɵfac = function EditComponent_Factory(t) {\n  return new (t || EditComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ApiEvertecService));\n};\nEditComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EditComponent,\n  selectors: [[\"app-edit\"]],\n  decls: 44,\n  vars: 1,\n  consts: [[1, \"container\"], [3, \"formGroup\"], [1, \"row\", \"row-centered\", \"form-group\"], [1, \"col-lg-4\", \"col-md-4\", \"col-sm-12\", \"col-xs-12\", \"col-centered\"], [\"type\", \"text\", \"formControlName\", \"idPerson\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"image\", \"formControlName\", \"photo\", 1, \"form-control\"], [1, \"col-lg-6\", \"col-md-6\", \"col-sm-12\", \"col-xs-12\", \"col-centered\"], [\"type\", \"text\", \"formControlName\", \"name\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"lastName\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"date\", \"formControlName\", \"birthdate\", \"required\", \"\", 1, \"form-control\"], [1, \"col-lg-3\", \"col-md-3\", \"col-sm-6\", \"col-xs-6\", \"col-centered\"], [\"id\", \"idMaritalStatus\", \"formControlName\", \"idMaritalStatus\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"type\", \"image\", \"formControlName\", \"haveBrothers\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"]],\n  template: function EditComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-header\");\n      i0.ɵɵelementStart(1, \"div\", 0)(2, \"form\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"label\");\n      i0.ɵɵtext(6, \"ID Usuario\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"div\", 3);\n      i0.ɵɵelementStart(9, \"div\", 3)(10, \"label\");\n      i0.ɵɵtext(11, \"Foto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"input\", 5)(13, \"img\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"div\", 2)(15, \"div\", 6)(16, \"label\");\n      i0.ɵɵtext(17, \"Nombre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"div\", 6)(20, \"label\");\n      i0.ɵɵtext(21, \"Apellido\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(22, \"input\", 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"div\", 2)(24, \"div\", 6)(25, \"label\");\n      i0.ɵɵtext(26, \"Fecha de Nacimiento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(27, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"div\", 10)(29, \"label\");\n      i0.ɵɵtext(30, \"Estado Civil\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"select\", 11)(32, \"option\", 12);\n      i0.ɵɵtext(33, \"Soltero\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"option\", 13);\n      i0.ɵɵtext(35, \"Casado\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(36, \"div\", 10)(37, \"label\");\n      i0.ɵɵtext(38, \"Tiene Hijos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(39, \"input\", 14);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(40, \"div\")(41, \"button\", 15);\n      i0.ɵɵtext(42, \"Guardar\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelement(43, \"app-footer\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.editForm);\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.FormGroupDirective, i3.FormControlName, i4.HeaderComponent, i5.FooterComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormGroup","FormControl","DatePipe","EditComponent","constructor","activerouter","router","api","idPerson","name","lastName","birthdate","photo","idMaritalStatus","haveBrothers","ngOnInit","userId","Number","snapshot","paramMap","get","getUser","showForm","getUserData","subscribe","data","inforUser","datePipe","editForm","setValue","transform","updateUser","form","Date","putUser","console","log","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["C:\\Users\\niyir\\Documents\\GitHub\\PruebaEvertec\\EvertecProject\\src\\app\\vistas\\edit\\edit.component.ts","C:\\Users\\niyir\\Documents\\GitHub\\PruebaEvertec\\EvertecProject\\src\\app\\vistas\\edit\\edit.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {Router, ActivatedRoute} from '@angular/router'\nimport { PersonI } from 'src/app/models/person.interface';\nimport {ApiEvertecService} from '../../servicios/api-evertec.service';\nimport {FormGroup, FormControl, Validators} from '@angular/forms';\nimport { DatePipe } from '@angular/common';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'app-edit',\n  templateUrl: './edit.component.html',\n  styleUrls: ['./edit.component.css']\n})\n\n\nexport class EditComponent implements OnInit {\n \n  constructor(private activerouter:ActivatedRoute, private router:Router, private api:ApiEvertecService){\n\n  }\n\n  inforUser:PersonI | any;\n  \n  editForm= new FormGroup({\n    idPerson:   new FormControl(0), \n    name: new FormControl(''),          \n    lastName:   new FormControl(''),     \n    birthdate:   new FormControl(''),    \n    photo:       new FormControl(''),    \n    idMaritalStatus: new FormControl(1),\n    haveBrothers:  new FormControl(false)  \n  })\n\nngOnInit(): void{\n  let userId:number= Number(this.activerouter.snapshot.paramMap.get('id'));\n  this.getUser(userId);  \n  this.showForm();\n}\n\n\ngetUserData(userId: number): Observable<PersonI> {\n  return this.api.getUser(userId);\n}\n\n/** Consulta un usuario */\ngetUser(userId: number)\n{\n  this.getUserData(userId).subscribe(data =>{   \n    this.inforUser= data;\n    //this.showForm();\n  });\n  \n  /*this.api.getUser(userId).subscribe(data =>{   \n    this.inforUser= data;\n    const datePipe = new DatePipe('en-CO');\n    \n    this.editForm.setValue({\n      'idPerson': this.inforUser.idPerson,\n      'name': this.inforUser.name,\n      'lastName': this.inforUser.lastName,\n      'birthdate': datePipe.transform(this.inforUser.birthdate, 'dd/MM/yyyy'),\n      'photo':    this.inforUser.photo,\n      'idMaritalStatus':this.inforUser.idMaritalStatus,\n      'haveBrothers': this.inforUser.haveBrothers\n    })\n  })*/\n}\n\n/**Muestra el usuario en los campos del formulario */\nshowForm()\n{\n  const datePipe = new DatePipe('en-CO');\n    \n  this.editForm.setValue({\n    'idPerson': this.inforUser.idPerson,\n    'name': this.inforUser.name,\n    'lastName': this.inforUser.lastName,\n    'birthdate': datePipe.transform(this.inforUser.birthdate, 'dd/MM/yyyy'),\n    'photo':    this.inforUser.photo,\n    'idMaritalStatus':this.inforUser.idMaritalStatus,\n    'haveBrothers': this.inforUser.haveBrothers\n  })\n}\n\n/** Permite editar un usuario */\nupdateUser(form:Partial<PersonI>)\n{\n  //form.name = form.name ?? ''; // Proporciona una cadena vacía si name es null\n  let userId:number= Number(this.activerouter.snapshot.paramMap.get('id'));\n\n  const data: PersonI = {\n    idPerson: form.idPerson || 0,\n    name: form.name || '',\n    lastName: form.lastName || '',\n    birthdate: form.birthdate || new Date(),\n    photo: form.photo || null,\n    idMaritalStatus: form.idMaritalStatus || 0,\n    haveBrothers: form.haveBrothers || false\n  };\n\n  //Consume método put del API \n  this.api.putUser(form as PersonI,userId).subscribe(data =>{\n    console.log(data);\n  })\n}\n\n}\n","<app-header></app-header>\n\n<div class=\"container\">\n    <form [formGroup]=\"editForm\" >\n    <div class=\"row row-centered form-group\">\n        <div class=\"col-lg-4 col-md-4 col-sm-12 col-xs-12 col-centered\">\n            <label>ID Usuario</label>\n        <input type=\"text\" class=\"form-control\" formControlName=\"idPerson\" required/>\n        </div> \n        \n         <div class=\"col-lg-4 col-md-4 col-sm-12 col-xs-12 col-centered\">\n          \n         </div>\n         <div class=\"col-lg-4 col-md-4 col-sm-12 col-xs-12 col-centered\">\n            <label>Foto</label>\n             <input type=\"image\" class=\"form-control\" formControlName=\"photo\">\n             <img >\n         </div>\n    </div>\n      \n        <div class=\"row row-centered form-group\">\n            <div class=\"col-lg-6 col-md-6 col-sm-12 col-xs-12 col-centered\">\n                <label>Nombre</label>\n                <input type=\"text\" class=\"form-control\" formControlName=\"name\" required>\n\n                <!--<div *ngIf=\"editForm.get('name').invalid && (editForm.get('name').dirty || editForm.get('name').touched)\">\n                    <div *ngIf=\"editForm.get('name').errors.required\">\n                      El nombre es requerido.\n                    </div>\n                  </div>-->\n            </div>\n           <div class=\"col-lg-6 col-md-6 col-sm-12 col-xs-12 col-centered\">\n                <label>Apellido</label>\n                <input type=\"text\" class=\"form-control\" formControlName=\"lastName\" required>\n            </div>\n        </div>      \n        <div class=\"row row-centered form-group\">\n            <div class=\"col-lg-6 col-md-6 col-sm-12 col-xs-12 col-centered\">\n                <label>Fecha de Nacimiento</label>\n                <input type=\"date\" class=\"form-control\" formControlName=\"birthdate\" required>\n            </div>\n            <div class=\"col-lg-3 col-md-3 col-sm-6 col-xs-6 col-centered\">\n                <label>Estado Civil</label>\n                <select id=\"idMaritalStatus\" formControlName=\"idMaritalStatus\">\n                    <option value=\"1\">Soltero</option>\n                    <option value=\"2\">Casado</option>\n                </select>\n            </div>\n            <div class=\"col-lg-3 col-md-3 col-sm-6 col-xs-6 col-centered\">\n                <label>Tiene Hijos</label>\n                <input type=\"image\" class=\"form-control\" formControlName=\"haveBrothers\" required>\n            </div>\n        </div>\n       \n        <div>        \n            <button type=\"submit\" class=\"btn btn-primary\">Guardar</button>\n        </div>\n\n    </form>\n\n</div>\n\n\n<app-footer></app-footer>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}